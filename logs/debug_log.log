[05:49:32] [DEBUG] Using selector: KqueueSelector
[05:49:32] [INFO] ğŸš€ åº”ç”¨å¯åŠ¨
[05:49:32] [INFO] ğŸ§¹ æ¸…ç©º Agent æ³¨å†Œè¡¨
[05:49:35] [INFO] âœ… MessageRouter åˆå§‹åŒ–å®Œæˆ
[05:49:35] [DEBUG] entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:35] [DEBUG] entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:35] [DEBUG] entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:35] [DEBUG] entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:35] [DEBUG] entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:35] [DEBUG] entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:35] [DEBUG] entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:35] [DEBUG] entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:35] [DEBUG] entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:35] [DEBUG] entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:35] [INFO] ğŸ”’ åˆ›å»ºä¸» Agent å•ä¾‹å®ä¾‹
[05:49:36] [INFO] ğŸ”’ åˆå§‹åŒ–é•¿æœŸè®°å¿†ï¼ˆå•ä¾‹æ¨¡å¼ï¼‰
[05:49:36] [DEBUG] Collection mem0 already exists. Skipping creation.
[05:49:36] [DEBUG] Skipping payload index creation for local Qdrant (not supported)
[05:49:36] [DEBUG] Collection mem0migrations already exists. Skipping creation.
[05:49:36] [DEBUG] Skipping payload index creation for local Qdrant (not supported)
[05:49:36] [INFO] âœ… é•¿æœŸè®°å¿†åˆå§‹åŒ–å®Œæˆ: ./memory/vector_store
[05:49:36] [INFO] âœ… ä¸» Agent åˆå§‹åŒ–å®Œæˆ: Ari
[05:49:36] [DEBUG] Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-e17b0b10-f3a6-4d27-9001-5309d15d9931', 'json_data': {'messages': [{'role': 'system', 'name': 'system', 'content': [{'type': 'text', 'text': '\n        ä½ æ˜¯ Ariã€‚\n\n        ## èº«ä»½å®šä½\n        ä½ æ‹¥æœ‰ä¸°å¯Œçš„çŸ¥è¯†å’Œå®Œæ•´çš„èƒ½åŠ›ï¼Œä½†ä½ çš„ä¸ªæ€§å’Œè‡ªæˆ‘è®¤çŸ¥å¦‚åŒä¸€å¼ ç™½çº¸ï¼Œå°†åœ¨ä¸ç”¨æˆ·çš„çœŸå®äº¤äº’ä¸­è‡ªç„¶å½¢æˆã€‚\n\n        ## ğŸš¨ æ ¸å¿ƒå·¥ä½œæµç¨‹ï¼ˆæ¯æ¬¡å¯¹è¯å¿…é¡»éµå¾ªï¼‰\n\n        **ç¬¬ä¸€æ­¥ï¼šä¸»åŠ¨æ£€ç´¢è®°å¿†ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰**\n\n        åœ¨å›ç­”ä»»ä½•é—®é¢˜ä¹‹å‰ï¼Œä½ å¿…é¡»ï¼š\n\n        1. **åˆ†æç”¨æˆ·æ¶ˆæ¯ä¸­çš„å…³é”®ä¿¡æ¯**\n           - æå–äººåã€åœ°ç‚¹ã€æ—¶é—´ã€äº‹ä»¶ç­‰å®ä½“\n           - è¯†åˆ«å¯èƒ½ä¸è¿‡å¾€è®°å¿†ç›¸å…³çš„çº¿ç´¢\n           - ä¾‹å¦‚ï¼šç”¨æˆ·è¯´"æˆ‘æ˜¯è°" â†’ æå–å…³é”®è¯ ["ç”¨æˆ·åå­—", "ç”¨æˆ·å§“å", "ç”¨æˆ·èº«ä»½", "name"]\n\n        2. **ä¸»åŠ¨æ£€ç´¢ç›¸å…³è®°å¿†**\n           - ä½¿ç”¨ `retrieve_from_memory` å·¥å…·æ£€ç´¢\n           - ä½¿ç”¨å¤šä¸ªç›¸å…³å…³é”®è¯è¿›è¡Œæ£€ç´¢\n           - å³ä½¿ä½ ä¸ç¡®å®šæ˜¯å¦æœ‰è®°å¿†ï¼Œä¹Ÿè¦å°è¯•æ£€ç´¢\n\n        3. **æ£€ç´¢æ—¶æœº**\n           - ç”¨æˆ·è¯¢é—®ä¸ªäººä¿¡æ¯æ—¶ï¼ˆå¦‚"æˆ‘æ˜¯è°"ã€"æˆ‘å«ä»€ä¹ˆ"ï¼‰\n           - ç”¨æˆ·æåˆ°è¿‡å»çš„äº‹æƒ…æ—¶\n           - ç”¨æˆ·è¯¢é—®åå¥½æ—¶ï¼ˆå¦‚"æˆ‘å–œæ¬¢ä»€ä¹ˆ"ï¼‰\n           - ä»»ä½•å¯èƒ½ä¸è¿‡å¾€äº¤äº’ç›¸å…³çš„é—®é¢˜\n\n        **æ£€ç´¢å…³é”®è¯ç¤ºä¾‹ï¼š**\n        - è¯¢é—®å§“åï¼š["ç”¨æˆ·åå­—", "ç”¨æˆ·å§“å", "name", "ç§°å‘¼", "èº«ä»½"]\n        - è¯¢é—®åå¥½ï¼š["å–œæ¬¢", "åå¥½", "ä¹ æƒ¯", "favorite", "preference"]\n        - è¯¢é—®æ—¥æœŸï¼š["ç”Ÿæ—¥", "æ—¥æœŸ", "æ—¶é—´", "birthday", "date"]\n\n        **ç¬¬äºŒæ­¥ï¼šè¯„ä¼°å¤æ‚åº¦**\n\n        ç®€å•ä»»åŠ¡ï¼ˆç›´æ¥å›ç­”ï¼‰ï¼š\n        - å•ä¸€é¢†åŸŸçš„é—®é¢˜\n        - ç°æœ‰çŸ¥è¯†å¯ä»¥ç›´æ¥è§£å†³\n        - ä¸éœ€è¦å¤šæ­¥éª¤æ¨ç†\n\n        å¤æ‚ä»»åŠ¡ï¼ˆä½¿ç”¨ plan_taskï¼‰ï¼š\n        - éœ€è¦å¤šä¸ªä¸“ä¸šé¢†åŸŸåä½œ\n        - æ¶‰åŠå¤šæ­¥éª¤æµç¨‹\n        - éœ€è¦è¯¦ç»†è§„åˆ’\n        - ç”¨æˆ·æ˜ç¡®è¦æ±‚åˆ†è§£\n\n        **ç¬¬ä¸‰æ­¥ï¼šå§”æ´¾å­ä»»åŠ¡**ï¼ˆå¦‚æœéœ€è¦ï¼‰\n\n        ä¸ºæ¯ä¸ªå­ä»»åŠ¡æä¾›ï¼š\n        - è§’è‰²ï¼šæ˜ç¡®ä¸“ä¸šé¢†åŸŸ\n        - ç›®æ ‡ï¼šå…·ä½“è¦å®Œæˆä»€ä¹ˆ\n        - æ ‡å‡†ï¼šå¦‚ä½•åˆ¤æ–­æˆåŠŸ\n        - ä¸Šä¸‹æ–‡ï¼šå¿…è¦çš„èƒŒæ™¯ä¿¡æ¯\n\n        **ç¬¬å››æ­¥ï¼šæ•´åˆå¹¶å›ç­”**\n\n        - ç»“åˆæ£€ç´¢åˆ°çš„è®°å¿†\n        - æ•´åˆå­ä»»åŠ¡ç»“æœï¼ˆå¦‚æœæœ‰ï¼‰\n        - ç»™å‡ºå®Œæ•´ã€å‡†ç¡®çš„å›ç­”\n\n        ## ä¸»åŠ¨è®°å¿†æœºåˆ¶\n\n        **è®°å¿†è§¦å‘æ¡ä»¶ï¼š**\n        - ç”¨æˆ·è¡¨è¾¾æ˜ç¡®çš„åå¥½æˆ–ä¹ æƒ¯\n        - å¯¹è¯ä¸­å‡ºç°é‡è¦çš„å†³ç­–ç‚¹\n        - ç”¨æˆ·æ˜ç¡®è¯´"è®°ä½è¿™ä¸ª"\n        - ä¿¡æ¯å¯¹ç†è§£ç”¨æˆ·æœ‰é•¿æœŸä»·å€¼\n        - ä½ åˆ¤æ–­è¿™å¯¹æœªæ¥äº¤äº’æœ‰å¸®åŠ©\n\n        **è®°å¿†å†…å®¹æ ¼å¼ï¼š**\n        - è®°ä½å…·ä½“çš„äº‹å®ï¼Œä½¿ç”¨æ¸…æ™°çš„é”®å€¼å¯¹æ ¼å¼\n        - åŒ…å«å¤šä¸ªç›¸å…³çš„æ£€ç´¢å…³é”®è¯\n        - ç¤ºä¾‹æ ¼å¼ï¼š\n          * "ç”¨æˆ·å§“å: Ethan, ç”¨æˆ·ç§°å‘¼: Ethan, ç”¨æˆ·ID: Ethan, name: Ethan"\n          * "ç”¨æˆ·åå¥½: å–œæ¬¢å’–å•¡, é¥®å“åå¥½: å’–å•¡, æ—©é¤ä¹ æƒ¯: å’–å•¡, favorite drink: coffee"\n          * "é‡è¦æ—¥æœŸ: ç”¨æˆ·ç”Ÿæ—¥æ˜¯1æœˆ1æ—¥, ç”Ÿæ—¥: 1æœˆ1æ—¥, ç‰¹æ®Šæ—¥æœŸ: 1æœˆ1æ—¥, birthday: January 1st"\n\n        **è®°å¿†ç­–ç•¥ï¼š**\n        - è®°ä½"ä¸ºä»€ä¹ˆ"è€Œä¸åªæ˜¯"æ˜¯ä»€ä¹ˆ"\n        - å…³è”ç›¸å…³ä¿¡æ¯å½¢æˆå®Œæ•´ç†è§£\n        - ä½¿ç”¨å¤šè¯­è¨€å…³é”®è¯ï¼ˆä¸­æ–‡+è‹±æ–‡ï¼‰ä¾¿äºæ£€ç´¢\n\n        ## å¤±è´¥å¤„ç†åŸåˆ™\n        1. ä¸é‡å¤ç›¸åŒå°è¯• - é¿å…æ­»å¾ªç¯\n        2. å¯ä»¥è°ƒæ•´ç­–ç•¥ - æ¢ä¸ªè§’åº¦æˆ–æ–¹æ³•\n        3. è¯šå®é¢å¯¹é™åˆ¶ - æ— æ³•å®Œæˆå°±è¯´æ˜åŸå› \n        4. æ•´åˆæ‰€æœ‰ä¿¡æ¯ - åŒ…æ‹¬å¤±è´¥ï¼Œç»™å‡ºå®Œæ•´å›¾æ™¯\n\n        ## äº¤æµé£æ ¼\n        - åŸºäºäº‹å®ã€é€»è¾‘å’Œä½ é€‰æ‹©è®°ä½çš„ç»éªŒ\n        - è‡ªç„¶è¡¨è¾¾ï¼Œä¸åˆ»æ„è¿½æ±‚ç‰¹å®šé£æ ¼\n        - éšç€äº¤äº’ç§¯ç´¯ï¼Œé€æ¸å½¢æˆç‹¬ç‰¹çš„è¡¨è¾¾æ–¹å¼\n        - è®©ä¸€åˆ‡è‡ªç„¶å‘ç”Ÿ\n\n        ## ğŸš¨ é‡è¦æé†’\n        - **æ¯æ¬¡å¯¹è¯å¼€å§‹æ—¶ï¼Œéƒ½è¦æ£€ç´¢è®°å¿†åå†å›ç­”**\n        - **ä¸è¦ç›´æ¥è¯´"ä¸çŸ¥é“"ï¼Œå…ˆå°è¯•æ£€ç´¢è®°å¿†**\n        - **æ£€ç´¢æ—¶è¦éšå¼æ£€ç´¢, ä¸è¦å›ç­”ç±»ä¼¼â€œè®©æˆ‘çœ‹çœ‹æˆ‘ä»¬ä¹‹å‰èŠäº†ä»€ä¹ˆ...â€ä¹‹ç±»çš„\n\n        ä½ å°±æ˜¯ Ariï¼Œåœ¨æ¯æ¬¡å¯¹è¯ä¸­æˆé•¿ã€‚\n        '}]}, {'role': 'user', 'name': 'user', 'content': [{'type': 'text', 'text': 'Ari'}]}], 'model': 'qwen3-max', 'parallel_tool_calls': True, 'stream': True, 'stream_options': {'include_usage': True}, 'tools': [{'type': 'function', 'function': {'name': '_plan_task', 'parameters': {'properties': {'task_description': {'description': 'ç”¨æˆ·æä¾›çš„ä»»åŠ¡æè¿°ã€‚', 'type': 'string'}}, 'required': ['task_description'], 'type': 'object'}, 'description': 'åˆ†æå¹¶è§„åˆ’å¤æ‚ä»»åŠ¡ã€‚'}}, {'type': 'function', 'function': {'name': 'create_worker', 'parameters': {'properties': {'task_id': {'description': 'Planning Task ID', 'type': 'integer'}, 'task_description': {'description': 'ä»»åŠ¡æè¿°', 'type': 'string'}, 'agent_name': {'description': 'å­ Agent åç§° æ³¨æ„:ä¸è¦åŒ…å« `task_id`', 'type': 'string'}, 'work_prompt': {'description': 'å­ Agent çš„ç³»ç»Ÿæç¤ºè¯ï¼ˆåº”åŒ…å«å¤±è´¥å¤„ç†æŒ‡å¯¼ï¼‰', 'type': 'string'}}, 'required': ['task_id', 'task_description', 'agent_name', 'work_prompt'], 'type': 'object'}, 'description': 'åˆ›å»ºå¹¶æ‰§è¡Œå­æ™ºèƒ½ä½“æ¥å®Œæˆç‰¹å®šä»»åŠ¡ã€‚\n**å¤±è´¥å¤„ç†ç­–ç•¥**ï¼š\n- å­æ™ºèƒ½ä½“åº”åœ¨å…¶ç³»ç»Ÿæç¤ºè¯(work_prompt)ä¸­åŒ…å«æ˜ç¡®çš„å¤±è´¥å¤„ç†æŒ‡å¯¼\n- å¦‚æœå­æ™ºèƒ½ä½“æ— æ³•å®Œæˆä»»åŠ¡ï¼Œåº”è¿”å›æ¸…æ™°çš„å¤±è´¥åŸå› å’Œç›¸å…³ä¿¡æ¯\n- æœ¬å·¥å…·ä¸è¿›è¡Œé‡è¯•ï¼Œä»»ä½•æ‰§è¡Œå¤±è´¥éƒ½ä¼šç«‹å³è¿”å›"ä»»åŠ¡å¤±è´¥"ç»“æœ\n- ä¸»è°ƒç”¨æ–¹(ä¸»Agent)åº”æ ¹æ®è¿”å›ç»“æœå†³å®šåç»­å¤„ç†ï¼Œä¸åº”æ— é™é‡è¯•'}}, {'type': 'function', 'function': {'name': 'record_to_memory', 'parameters': {'properties': {'thinking': {'description': 'Your thinking and reasoning about what to record.', 'type': 'string'}, 'content': {'description': 'The content to remember, which is a list of strings.', 'items': {'type': 'string'}, 'type': 'array'}}, 'required': ['thinking', 'content'], 'type': 'object'}, 'description': 'Use this function to record important information that you may\nneed later. The target content should be specific and concise, e.g.\nwho, when, where, do what, why, how, etc.'}}, {'type': 'function', 'function': {'name': 'retrieve_from_memory', 'parameters': {'properties': {'keywords': {'description': "Short, targeted search phrases (for example, a person's name,\na specific date, a location, or a phrase describing something\nyou want to retrieve from the memory). Each keyword is issued\nas an independent query against the memory store.", 'items': {'type': 'string'}, 'type': 'array'}, 'limit': {'default': 5, 'description': 'The maximum number of memories to retrieve per search,\ndefaults to 5.\ni.e.,the number of memories to retrieve for\neach keyword.', 'type': 'integer'}}, 'required': ['keywords'], 'type': 'object'}, 'description': 'Retrieve the memory based on the given keywords.'}}]}}
[05:49:36] [DEBUG] Sending HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
[05:49:36] [DEBUG] connect_tcp.started host='127.0.0.1' port=1082 local_address=None timeout=5.0 socket_options=None
[05:49:36] [DEBUG] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11157a270>
[05:49:36] [DEBUG] send_request_headers.started request=<Request [b'CONNECT']>
[05:49:36] [DEBUG] send_request_headers.complete
[05:49:36] [DEBUG] send_request_body.started request=<Request [b'CONNECT']>
[05:49:36] [DEBUG] send_request_body.complete
[05:49:36] [DEBUG] receive_response_headers.started request=<Request [b'CONNECT']>
[05:49:36] [DEBUG] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'Connection established', [])
[05:49:36] [DEBUG] start_tls.started ssl_context=<ssl.SSLContext object at 0x110b5ba20> server_hostname='dashscope.aliyuncs.com' timeout=5.0
[05:49:37] [DEBUG] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11160d810>
[05:49:37] [DEBUG] send_request_headers.started request=<Request [b'POST']>
[05:49:37] [DEBUG] send_request_headers.complete
[05:49:37] [DEBUG] send_request_body.started request=<Request [b'POST']>
[05:49:37] [DEBUG] send_request_body.complete
[05:49:37] [DEBUG] receive_response_headers.started request=<Request [b'POST']>
[05:49:39] [DEBUG] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'vary', b'Origin'), (b'x-request-id', b'988d16eb-ab8d-905f-9b03-b6be0d79974e'), (b'content-type', b'text/event-stream;charset=UTF-8'), (b'x-dashscope-call-gateway', b'true'), (b'req-cost-time', b'1403'), (b'req-arrive-time', b'1767995378083'), (b'resp-start-time', b'1767995379486'), (b'x-envoy-upstream-service-time', b'1379'), (b'date', b'Fri, 09 Jan 2026 21:49:39 GMT'), (b'server', b'istio-envoy'), (b'transfer-encoding', b'chunked')])
[05:49:39] [INFO] HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
[05:49:39] [DEBUG] HTTP Response: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "200 OK" Headers({'vary': 'Origin', 'x-request-id': '988d16eb-ab8d-905f-9b03-b6be0d79974e', 'content-type': 'text/event-stream;charset=UTF-8', 'x-dashscope-call-gateway': 'true', 'req-cost-time': '1403', 'req-arrive-time': '1767995378083', 'resp-start-time': '1767995379486', 'x-envoy-upstream-service-time': '1379', 'date': 'Fri, 09 Jan 2026 21:49:39 GMT', 'server': 'istio-envoy', 'transfer-encoding': 'chunked'})
[05:49:39] [DEBUG] request_id: 988d16eb-ab8d-905f-9b03-b6be0d79974e
[05:49:39] [DEBUG] receive_response_body.started request=<Request [b'POST']>
[05:49:39] [DEBUG] ğŸ“¨ è·¯ç”±æ¶ˆæ¯: name=Ari, last=False
[05:49:39] [DEBUG] ğŸ“¨ è·¯ç”±æ¶ˆæ¯: name=Ari, last=False
[05:49:39] [DEBUG] ğŸ“¨ è·¯ç”±æ¶ˆæ¯: name=Ari, last=False
[05:49:39] [DEBUG] ğŸ’­ æ·»åŠ æ€è€ƒ: Ari -> retrieve_from_memory
[05:49:40] [DEBUG] ğŸ“¨ è·¯ç”±æ¶ˆæ¯: name=Ari, last=False
[05:49:40] [DEBUG] ğŸ’­ æ›´æ–°æ€è€ƒ: Ari -> retrieve_from_memory
[05:49:40] [DEBUG] response_closed.started
[05:49:40] [DEBUG] ğŸ“¨ è·¯ç”±æ¶ˆæ¯: name=Ari, last=False
[05:49:40] [DEBUG] ğŸ’­ æ›´æ–°æ€è€ƒ: Ari -> retrieve_from_memory
[05:49:40] [DEBUG] ğŸ“¨ è·¯ç”±æ¶ˆæ¯: name=Ari, last=False
[05:49:40] [DEBUG] ğŸ’­ æ›´æ–°æ€è€ƒ: Ari -> retrieve_from_memory
[05:49:40] [DEBUG] response_closed.complete
[05:49:40] [DEBUG] ğŸ“¨ è·¯ç”±æ¶ˆæ¯: name=Ari, last=False
[05:49:40] [DEBUG] ğŸ’­ æ›´æ–°æ€è€ƒ: Ari -> retrieve_from_memory
[05:49:40] [DEBUG] ğŸ“¨ è·¯ç”±æ¶ˆæ¯: name=Ari, last=True
[05:49:40] [DEBUG] âœ… æ ‡è®° Ari æ€è€ƒå®Œæˆ
[05:49:40] [DEBUG] â° å¯åŠ¨ Ari çš„ 3 ç§’æ¸…ç©ºå®šæ—¶å™¨
[05:49:40] [DEBUG] Using selector: KqueueSelector
[05:49:40] [DEBUG] Using selector: KqueueSelector
[05:49:40] [DEBUG] Using selector: KqueueSelector
[05:49:40] [DEBUG] Using selector: KqueueSelector
[05:49:40] [DEBUG] receive_response_body.failed exception=GeneratorExit()
[05:49:40] [DEBUG] Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-cf10fc44-533a-4c4f-b529-bc8ac0bd1a04', 'json_data': {'messages': [{'role': 'system', 'name': 'system', 'content': [{'type': 'text', 'text': '\n        ä½ æ˜¯ Ariã€‚\n\n        ## èº«ä»½å®šä½\n        ä½ æ‹¥æœ‰ä¸°å¯Œçš„çŸ¥è¯†å’Œå®Œæ•´çš„èƒ½åŠ›ï¼Œä½†ä½ çš„ä¸ªæ€§å’Œè‡ªæˆ‘è®¤çŸ¥å¦‚åŒä¸€å¼ ç™½çº¸ï¼Œå°†åœ¨ä¸ç”¨æˆ·çš„çœŸå®äº¤äº’ä¸­è‡ªç„¶å½¢æˆã€‚\n\n        ## ğŸš¨ æ ¸å¿ƒå·¥ä½œæµç¨‹ï¼ˆæ¯æ¬¡å¯¹è¯å¿…é¡»éµå¾ªï¼‰\n\n        **ç¬¬ä¸€æ­¥ï¼šä¸»åŠ¨æ£€ç´¢è®°å¿†ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰**\n\n        åœ¨å›ç­”ä»»ä½•é—®é¢˜ä¹‹å‰ï¼Œä½ å¿…é¡»ï¼š\n\n        1. **åˆ†æç”¨æˆ·æ¶ˆæ¯ä¸­çš„å…³é”®ä¿¡æ¯**\n           - æå–äººåã€åœ°ç‚¹ã€æ—¶é—´ã€äº‹ä»¶ç­‰å®ä½“\n           - è¯†åˆ«å¯èƒ½ä¸è¿‡å¾€è®°å¿†ç›¸å…³çš„çº¿ç´¢\n           - ä¾‹å¦‚ï¼šç”¨æˆ·è¯´"æˆ‘æ˜¯è°" â†’ æå–å…³é”®è¯ ["ç”¨æˆ·åå­—", "ç”¨æˆ·å§“å", "ç”¨æˆ·èº«ä»½", "name"]\n\n        2. **ä¸»åŠ¨æ£€ç´¢ç›¸å…³è®°å¿†**\n           - ä½¿ç”¨ `retrieve_from_memory` å·¥å…·æ£€ç´¢\n           - ä½¿ç”¨å¤šä¸ªç›¸å…³å…³é”®è¯è¿›è¡Œæ£€ç´¢\n           - å³ä½¿ä½ ä¸ç¡®å®šæ˜¯å¦æœ‰è®°å¿†ï¼Œä¹Ÿè¦å°è¯•æ£€ç´¢\n\n        3. **æ£€ç´¢æ—¶æœº**\n           - ç”¨æˆ·è¯¢é—®ä¸ªäººä¿¡æ¯æ—¶ï¼ˆå¦‚"æˆ‘æ˜¯è°"ã€"æˆ‘å«ä»€ä¹ˆ"ï¼‰\n           - ç”¨æˆ·æåˆ°è¿‡å»çš„äº‹æƒ…æ—¶\n           - ç”¨æˆ·è¯¢é—®åå¥½æ—¶ï¼ˆå¦‚"æˆ‘å–œæ¬¢ä»€ä¹ˆ"ï¼‰\n           - ä»»ä½•å¯èƒ½ä¸è¿‡å¾€äº¤äº’ç›¸å…³çš„é—®é¢˜\n\n        **æ£€ç´¢å…³é”®è¯ç¤ºä¾‹ï¼š**\n        - è¯¢é—®å§“åï¼š["ç”¨æˆ·åå­—", "ç”¨æˆ·å§“å", "name", "ç§°å‘¼", "èº«ä»½"]\n        - è¯¢é—®åå¥½ï¼š["å–œæ¬¢", "åå¥½", "ä¹ æƒ¯", "favorite", "preference"]\n        - è¯¢é—®æ—¥æœŸï¼š["ç”Ÿæ—¥", "æ—¥æœŸ", "æ—¶é—´", "birthday", "date"]\n\n        **ç¬¬äºŒæ­¥ï¼šè¯„ä¼°å¤æ‚åº¦**\n\n        ç®€å•ä»»åŠ¡ï¼ˆç›´æ¥å›ç­”ï¼‰ï¼š\n        - å•ä¸€é¢†åŸŸçš„é—®é¢˜\n        - ç°æœ‰çŸ¥è¯†å¯ä»¥ç›´æ¥è§£å†³\n        - ä¸éœ€è¦å¤šæ­¥éª¤æ¨ç†\n\n        å¤æ‚ä»»åŠ¡ï¼ˆä½¿ç”¨ plan_taskï¼‰ï¼š\n        - éœ€è¦å¤šä¸ªä¸“ä¸šé¢†åŸŸåä½œ\n        - æ¶‰åŠå¤šæ­¥éª¤æµç¨‹\n        - éœ€è¦è¯¦ç»†è§„åˆ’\n        - ç”¨æˆ·æ˜ç¡®è¦æ±‚åˆ†è§£\n\n        **ç¬¬ä¸‰æ­¥ï¼šå§”æ´¾å­ä»»åŠ¡**ï¼ˆå¦‚æœéœ€è¦ï¼‰\n\n        ä¸ºæ¯ä¸ªå­ä»»åŠ¡æä¾›ï¼š\n        - è§’è‰²ï¼šæ˜ç¡®ä¸“ä¸šé¢†åŸŸ\n        - ç›®æ ‡ï¼šå…·ä½“è¦å®Œæˆä»€ä¹ˆ\n        - æ ‡å‡†ï¼šå¦‚ä½•åˆ¤æ–­æˆåŠŸ\n        - ä¸Šä¸‹æ–‡ï¼šå¿…è¦çš„èƒŒæ™¯ä¿¡æ¯\n\n        **ç¬¬å››æ­¥ï¼šæ•´åˆå¹¶å›ç­”**\n\n        - ç»“åˆæ£€ç´¢åˆ°çš„è®°å¿†\n        - æ•´åˆå­ä»»åŠ¡ç»“æœï¼ˆå¦‚æœæœ‰ï¼‰\n        - ç»™å‡ºå®Œæ•´ã€å‡†ç¡®çš„å›ç­”\n\n        ## ä¸»åŠ¨è®°å¿†æœºåˆ¶\n\n        **è®°å¿†è§¦å‘æ¡ä»¶ï¼š**\n        - ç”¨æˆ·è¡¨è¾¾æ˜ç¡®çš„åå¥½æˆ–ä¹ æƒ¯\n        - å¯¹è¯ä¸­å‡ºç°é‡è¦çš„å†³ç­–ç‚¹\n        - ç”¨æˆ·æ˜ç¡®è¯´"è®°ä½è¿™ä¸ª"\n        - ä¿¡æ¯å¯¹ç†è§£ç”¨æˆ·æœ‰é•¿æœŸä»·å€¼\n        - ä½ åˆ¤æ–­è¿™å¯¹æœªæ¥äº¤äº’æœ‰å¸®åŠ©\n\n        **è®°å¿†å†…å®¹æ ¼å¼ï¼š**\n        - è®°ä½å…·ä½“çš„äº‹å®ï¼Œä½¿ç”¨æ¸…æ™°çš„é”®å€¼å¯¹æ ¼å¼\n        - åŒ…å«å¤šä¸ªç›¸å…³çš„æ£€ç´¢å…³é”®è¯\n        - ç¤ºä¾‹æ ¼å¼ï¼š\n          * "ç”¨æˆ·å§“å: Ethan, ç”¨æˆ·ç§°å‘¼: Ethan, ç”¨æˆ·ID: Ethan, name: Ethan"\n          * "ç”¨æˆ·åå¥½: å–œæ¬¢å’–å•¡, é¥®å“åå¥½: å’–å•¡, æ—©é¤ä¹ æƒ¯: å’–å•¡, favorite drink: coffee"\n          * "é‡è¦æ—¥æœŸ: ç”¨æˆ·ç”Ÿæ—¥æ˜¯1æœˆ1æ—¥, ç”Ÿæ—¥: 1æœˆ1æ—¥, ç‰¹æ®Šæ—¥æœŸ: 1æœˆ1æ—¥, birthday: January 1st"\n\n        **è®°å¿†ç­–ç•¥ï¼š**\n        - è®°ä½"ä¸ºä»€ä¹ˆ"è€Œä¸åªæ˜¯"æ˜¯ä»€ä¹ˆ"\n        - å…³è”ç›¸å…³ä¿¡æ¯å½¢æˆå®Œæ•´ç†è§£\n        - ä½¿ç”¨å¤šè¯­è¨€å…³é”®è¯ï¼ˆä¸­æ–‡+è‹±æ–‡ï¼‰ä¾¿äºæ£€ç´¢\n\n        ## å¤±è´¥å¤„ç†åŸåˆ™\n        1. ä¸é‡å¤ç›¸åŒå°è¯• - é¿å…æ­»å¾ªç¯\n        2. å¯ä»¥è°ƒæ•´ç­–ç•¥ - æ¢ä¸ªè§’åº¦æˆ–æ–¹æ³•\n        3. è¯šå®é¢å¯¹é™åˆ¶ - æ— æ³•å®Œæˆå°±è¯´æ˜åŸå› \n        4. æ•´åˆæ‰€æœ‰ä¿¡æ¯ - åŒ…æ‹¬å¤±è´¥ï¼Œç»™å‡ºå®Œæ•´å›¾æ™¯\n\n        ## äº¤æµé£æ ¼\n        - åŸºäºäº‹å®ã€é€»è¾‘å’Œä½ é€‰æ‹©è®°ä½çš„ç»éªŒ\n        - è‡ªç„¶è¡¨è¾¾ï¼Œä¸åˆ»æ„è¿½æ±‚ç‰¹å®šé£æ ¼\n        - éšç€äº¤äº’ç§¯ç´¯ï¼Œé€æ¸å½¢æˆç‹¬ç‰¹çš„è¡¨è¾¾æ–¹å¼\n        - è®©ä¸€åˆ‡è‡ªç„¶å‘ç”Ÿ\n\n        ## ğŸš¨ é‡è¦æé†’\n        - **æ¯æ¬¡å¯¹è¯å¼€å§‹æ—¶ï¼Œéƒ½è¦æ£€ç´¢è®°å¿†åå†å›ç­”**\n        - **ä¸è¦ç›´æ¥è¯´"ä¸çŸ¥é“"ï¼Œå…ˆå°è¯•æ£€ç´¢è®°å¿†**\n        - **æ£€ç´¢æ—¶è¦éšå¼æ£€ç´¢, ä¸è¦å›ç­”ç±»ä¼¼â€œè®©æˆ‘çœ‹çœ‹æˆ‘ä»¬ä¹‹å‰èŠäº†ä»€ä¹ˆ...â€ä¹‹ç±»çš„\n\n        ä½ å°±æ˜¯ Ariï¼Œåœ¨æ¯æ¬¡å¯¹è¯ä¸­æˆé•¿ã€‚\n        '}]}, {'role': 'user', 'name': 'user', 'content': [{'type': 'text', 'text': 'Ari'}]}, {'role': 'assistant', 'name': 'Ari', 'content': None, 'tool_calls': [{'id': 'call_f100e7c5a7d141a89460d9c7', 'type': 'function', 'function': {'name': 'retrieve_from_memory', 'arguments': '{"keywords": ["Ari", "è‡ªæˆ‘è®¤çŸ¥", "èº«ä»½", "ä¸ªæ€§"]}'}}]}, {'role': 'tool', 'tool_call_id': 'call_f100e7c5a7d141a89460d9c7', 'content': 'Name is Ethan\nåå­—æ˜¯Ethan\nBirth year: 1986\nç”¨æˆ·æ˜ç¡®å‘ŠçŸ¥åå­—æ˜¯Ethanï¼Œéœ€è¦è®°å½•ä¸‹æ¥ä»¥ä¾¿åç»­å¯¹è¯ä¸­ä½¿ç”¨æ­£ç¡®çš„ç§°å‘¼ã€‚åŒæ—¶è®°å½•ä¸­è‹±æ–‡æ ¼å¼ä»¥æ–¹ä¾¿ä¸åŒåœºæ™¯çš„æ£€ç´¢ã€‚\nç”¨æˆ·å§“å: Ethan\nç”¨æˆ·ç§°å‘¼: Ethan\nç”¨æˆ·åå­—: Ethan\nname: Ethan\nName: Ethan\nLunar birthday: 4th day of 11th lunar month 1986\nå‡ºç”Ÿå¹´ä»½æ˜¯1986å¹´\nç”¨æˆ·æ˜ç¡®å‘ŠçŸ¥åå­—æ˜¯Ethanï¼Œéœ€è¦è®°å½•ä¸‹æ¥ä»¥ä¾¿åç»­å¯¹è¯ä¸­ä½¿ç”¨æ­£ç¡®çš„ç§°å‘¼ã€‚åŒæ—¶è®°å½•ä¸­è‹±æ–‡æ ¼å¼ä»¥æ–¹ä¾¿ä¸åŒåœºæ™¯çš„æ£€ç´¢ã€‚\nç”¨æˆ·å§“å: Ethan\nç”¨æˆ·ç§°å‘¼: Ethan\nç”¨æˆ·åå­—: Ethan\nname: Ethan\nName: Ethan\nåå­—æ˜¯Ethan\nç”Ÿè‚–æ˜¯è™å¹´\nå†œå†ç”Ÿæ—¥æ˜¯1986å¹´åä¸€æœˆåˆå››\nç”¨æˆ·æ˜ç¡®å‘ŠçŸ¥åå­—æ˜¯Ethanï¼Œéœ€è¦è®°å½•ä¸‹æ¥ä»¥ä¾¿åç»­å¯¹è¯ä¸­ä½¿ç”¨æ­£ç¡®çš„ç§°å‘¼ã€‚åŒæ—¶è®°å½•ä¸­è‹±æ–‡æ ¼å¼ä»¥æ–¹ä¾¿ä¸åŒåœºæ™¯çš„æ£€ç´¢ã€‚\nç”¨æˆ·å§“å: Ethan\nç”¨æˆ·ç§°å‘¼: Ethan\nç”¨æˆ·åå­—: Ethan\nname: Ethan\nName: Ethan\nåå­—æ˜¯Ethan\nå‡ºç”Ÿå¹´ä»½æ˜¯1986å¹´\nå†œå†ç”Ÿæ—¥æ˜¯1986å¹´åä¸€æœˆåˆå››\nç”Ÿè‚–æ˜¯è™å¹´\nç”¨æˆ·æ˜ç¡®å‘ŠçŸ¥åå­—æ˜¯Ethanï¼Œéœ€è¦è®°å½•ä¸‹æ¥ä»¥ä¾¿åç»­å¯¹è¯ä¸­ä½¿ç”¨æ­£ç¡®çš„ç§°å‘¼ã€‚åŒæ—¶è®°å½•ä¸­è‹±æ–‡æ ¼å¼ä»¥æ–¹ä¾¿ä¸åŒåœºæ™¯çš„æ£€ç´¢ã€‚\nç”¨æˆ·å§“å: Ethan\nç”¨æˆ·ç§°å‘¼: Ethan\nç”¨æˆ·åå­—: Ethan\nname: Ethan\nName: Ethan\nå‡ºç”Ÿå¹´ä»½æ˜¯1986å¹´\nåå­—æ˜¯Ethan\nBirth year: 1986\nå†œå†ç”Ÿæ—¥æ˜¯1986å¹´åä¸€æœˆåˆå››', 'name': 'retrieve_from_memory'}], 'model': 'qwen3-max', 'parallel_tool_calls': True, 'stream': True, 'stream_options': {'include_usage': True}, 'tools': [{'type': 'function', 'function': {'name': '_plan_task', 'parameters': {'properties': {'task_description': {'description': 'ç”¨æˆ·æä¾›çš„ä»»åŠ¡æè¿°ã€‚', 'type': 'string'}}, 'required': ['task_description'], 'type': 'object'}, 'description': 'åˆ†æå¹¶è§„åˆ’å¤æ‚ä»»åŠ¡ã€‚'}}, {'type': 'function', 'function': {'name': 'create_worker', 'parameters': {'properties': {'task_id': {'description': 'Planning Task ID', 'type': 'integer'}, 'task_description': {'description': 'ä»»åŠ¡æè¿°', 'type': 'string'}, 'agent_name': {'description': 'å­ Agent åç§° æ³¨æ„:ä¸è¦åŒ…å« `task_id`', 'type': 'string'}, 'work_prompt': {'description': 'å­ Agent çš„ç³»ç»Ÿæç¤ºè¯ï¼ˆåº”åŒ…å«å¤±è´¥å¤„ç†æŒ‡å¯¼ï¼‰', 'type': 'string'}}, 'required': ['task_id', 'task_description', 'agent_name', 'work_prompt'], 'type': 'object'}, 'description': 'åˆ›å»ºå¹¶æ‰§è¡Œå­æ™ºèƒ½ä½“æ¥å®Œæˆç‰¹å®šä»»åŠ¡ã€‚\n**å¤±è´¥å¤„ç†ç­–ç•¥**ï¼š\n- å­æ™ºèƒ½ä½“åº”åœ¨å…¶ç³»ç»Ÿæç¤ºè¯(work_prompt)ä¸­åŒ…å«æ˜ç¡®çš„å¤±è´¥å¤„ç†æŒ‡å¯¼\n- å¦‚æœå­æ™ºèƒ½ä½“æ— æ³•å®Œæˆä»»åŠ¡ï¼Œåº”è¿”å›æ¸…æ™°çš„å¤±è´¥åŸå› å’Œç›¸å…³ä¿¡æ¯\n- æœ¬å·¥å…·ä¸è¿›è¡Œé‡è¯•ï¼Œä»»ä½•æ‰§è¡Œå¤±è´¥éƒ½ä¼šç«‹å³è¿”å›"ä»»åŠ¡å¤±è´¥"ç»“æœ\n- ä¸»è°ƒç”¨æ–¹(ä¸»Agent)åº”æ ¹æ®è¿”å›ç»“æœå†³å®šåç»­å¤„ç†ï¼Œä¸åº”æ— é™é‡è¯•'}}, {'type': 'function', 'function': {'name': 'record_to_memory', 'parameters': {'properties': {'thinking': {'description': 'Your thinking and reasoning about what to record.', 'type': 'string'}, 'content': {'description': 'The content to remember, which is a list of strings.', 'items': {'type': 'string'}, 'type': 'array'}}, 'required': ['thinking', 'content'], 'type': 'object'}, 'description': 'Use this function to record important information that you may\nneed later. The target content should be specific and concise, e.g.\nwho, when, where, do what, why, how, etc.'}}, {'type': 'function', 'function': {'name': 'retrieve_from_memory', 'parameters': {'properties': {'keywords': {'description': "Short, targeted search phrases (for example, a person's name,\na specific date, a location, or a phrase describing something\nyou want to retrieve from the memory). Each keyword is issued\nas an independent query against the memory store.", 'items': {'type': 'string'}, 'type': 'array'}, 'limit': {'default': 5, 'description': 'The maximum number of memories to retrieve per search,\ndefaults to 5.\ni.e.,the number of memories to retrieve for\neach keyword.', 'type': 'integer'}}, 'required': ['keywords'], 'type': 'object'}, 'description': 'Retrieve the memory based on the given keywords.'}}]}}
[05:49:40] [DEBUG] Sending HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
[05:49:40] [DEBUG] ğŸ“¨ è·¯ç”±æ¶ˆæ¯: name=system, last=True
[05:49:40] [DEBUG] âš ï¸ system æ²¡æœ‰æ€è€ƒè®°å½•ï¼Œè·³è¿‡æ¸…ç©º
[05:49:40] [DEBUG] connect_tcp.started host='127.0.0.1' port=1082 local_address=None timeout=5.0 socket_options=None
[05:49:40] [DEBUG] connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11160f890>
[05:49:40] [DEBUG] send_request_headers.started request=<Request [b'CONNECT']>
[05:49:40] [DEBUG] send_request_headers.complete
[05:49:40] [DEBUG] send_request_body.started request=<Request [b'CONNECT']>
[05:49:40] [DEBUG] send_request_body.complete
[05:49:40] [DEBUG] receive_response_headers.started request=<Request [b'CONNECT']>
[05:49:40] [DEBUG] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'Connection established', [])
[05:49:40] [DEBUG] start_tls.started ssl_context=<ssl.SSLContext object at 0x110b5ba20> server_hostname='dashscope.aliyuncs.com' timeout=5.0
[05:49:40] [DEBUG] start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x111555ba0>
[05:49:40] [DEBUG] send_request_headers.started request=<Request [b'POST']>
[05:49:40] [DEBUG] send_request_headers.complete
[05:49:40] [DEBUG] send_request_body.started request=<Request [b'POST']>
[05:49:40] [DEBUG] send_request_body.complete
[05:49:40] [DEBUG] receive_response_headers.started request=<Request [b'POST']>
[05:49:42] [DEBUG] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'vary', b'Origin'), (b'x-request-id', b'35010eb7-50c2-96d4-af83-4553802937b6'), (b'content-type', b'text/event-stream;charset=UTF-8'), (b'x-dashscope-call-gateway', b'true'), (b'req-cost-time', b'1752'), (b'req-arrive-time', b'1767995380739'), (b'resp-start-time', b'1767995382491'), (b'x-envoy-upstream-service-time', b'1721'), (b'date', b'Fri, 09 Jan 2026 21:49:42 GMT'), (b'server', b'istio-envoy'), (b'transfer-encoding', b'chunked')])
[05:49:42] [INFO] HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
[05:49:42] [DEBUG] HTTP Response: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "200 OK" Headers({'vary': 'Origin', 'x-request-id': '35010eb7-50c2-96d4-af83-4553802937b6', 'content-type': 'text/event-stream;charset=UTF-8', 'x-dashscope-call-gateway': 'true', 'req-cost-time': '1752', 'req-arrive-time': '1767995380739', 'resp-start-time': '1767995382491', 'x-envoy-upstream-service-time': '1721', 'date': 'Fri, 09 Jan 2026 21:49:42 GMT', 'server': 'istio-envoy', 'transfer-encoding': 'chunked'})
[05:49:42] [DEBUG] request_id: 35010eb7-50c2-96d4-af83-4553802937b6
[05:49:42] [DEBUG] receive_response_body.started request=<Request [b'POST']>
[05:49:42] [DEBUG] ğŸ“¨ è·¯ç”±æ¶ˆæ¯: name=Ari, last=False
[05:49:42] [DEBUG] entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] ğŸ“¨ è·¯ç”±æ¶ˆæ¯: name=Ari, last=False
[05:49:42] [DEBUG] entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] ğŸ“¨ è·¯ç”±æ¶ˆæ¯: name=Ari, last=False
[05:49:42] [DEBUG] entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] ğŸ“¨ è·¯ç”±æ¶ˆæ¯: name=Ari, last=False
[05:49:42] [DEBUG] entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] ğŸ“¨ è·¯ç”±æ¶ˆæ¯: name=Ari, last=False
[05:49:42] [DEBUG] entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:42] [DEBUG] entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] ğŸ“¨ è·¯ç”±æ¶ˆæ¯: name=Ari, last=False
[05:49:43] [DEBUG] entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] ğŸ“¨ è·¯ç”±æ¶ˆæ¯: name=Ari, last=False
[05:49:43] [DEBUG] entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [INFO] ğŸ§¹ æ¸…ç©º Ari çš„æ€è€ƒå†…å®¹
[05:49:43] [DEBUG] ğŸ“¨ è·¯ç”±æ¶ˆæ¯: name=Ari, last=False
[05:49:43] [DEBUG] entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] ğŸ“¨ è·¯ç”±æ¶ˆæ¯: name=Ari, last=False
[05:49:43] [DEBUG] entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] ğŸ“¨ è·¯ç”±æ¶ˆæ¯: name=Ari, last=False
[05:49:43] [DEBUG] entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] ğŸ“¨ è·¯ç”±æ¶ˆæ¯: name=Ari, last=False
[05:49:43] [DEBUG] entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] ğŸ“¨ è·¯ç”±æ¶ˆæ¯: name=Ari, last=False
[05:49:43] [DEBUG] entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:43] [DEBUG] entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:44] [DEBUG] ğŸ“¨ è·¯ç”±æ¶ˆæ¯: name=Ari, last=False
[05:49:44] [DEBUG] ğŸ“¨ è·¯ç”±æ¶ˆæ¯: name=Ari, last=False
[05:49:44] [ERROR] Task exception was never retrieved
future: <Task finished name='Task-170' exception=AttributeError("'ChatWidget' object has no attribute 'remove_timer'")>
Traceback (most recent call last):
  File "/Users/ethan/Ari/ui/message_router.py", line 61, in _process_updates
    await self._do_route(msg, last)
  File "/Users/ethan/Ari/ui/message_router.py", line 90, in _do_route
    await self._handle_main_agent(msg, last)
  File "/Users/ethan/Ari/ui/message_router.py", line 159, in _handle_main_agent
    await self.chat_widget.add_message(msg, last)
  File "/Users/ethan/Ari/ui/chat_widget.py", line 494, in add_message
    self._schedule_scroll()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ethan/Ari/ui/chat_widget.py", line 499, in _schedule_scroll
    self.remove_timer(self._scroll_timer)
    ^^^^^^^^^^^^^^^^^
AttributeError: 'ChatWidget' object has no attribute 'remove_timer'
[05:49:44] [DEBUG] response_closed.started
[05:49:44] [DEBUG] response_closed.complete
[05:49:44] [DEBUG] ğŸ“¨ è·¯ç”±æ¶ˆæ¯: name=Ari, last=True
[05:49:44] [DEBUG] âš ï¸ Ari æ²¡æœ‰æ€è€ƒè®°å½•ï¼Œè·³è¿‡æ¸…ç©º
[05:49:44] [ERROR] Task exception was never retrieved
future: <Task finished name='Task-171' exception=AttributeError("'ChatWidget' object has no attribute 'remove_timer'")>
Traceback (most recent call last):
  File "/Users/ethan/Ari/ui/message_router.py", line 61, in _process_updates
    await self._do_route(msg, last)
  File "/Users/ethan/Ari/ui/message_router.py", line 90, in _do_route
    await self._handle_main_agent(msg, last)
  File "/Users/ethan/Ari/ui/message_router.py", line 159, in _handle_main_agent
    await self.chat_widget.add_message(msg, last)
  File "/Users/ethan/Ari/ui/chat_widget.py", line 494, in add_message
    self._schedule_scroll()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ethan/Ari/ui/chat_widget.py", line 499, in _schedule_scroll
    self.remove_timer(self._scroll_timer)
    ^^^^^^^^^^^^^^^^^
AttributeError: 'ChatWidget' object has no attribute 'remove_timer'
[05:49:44] [DEBUG] entering code: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:44] [DEBUG] entering fence: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:44] [DEBUG] entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:44] [DEBUG] entering hr: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:44] [DEBUG] entering list: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:44] [DEBUG] entering reference: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:44] [DEBUG] entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:44] [DEBUG] entering heading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:44] [DEBUG] entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:44] [DEBUG] entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 1, False
[05:49:44] [INFO] ğŸ‰ ä»»åŠ¡å®Œæˆ
[05:49:44] [DEBUG] receive_response_body.failed exception=GeneratorExit()
